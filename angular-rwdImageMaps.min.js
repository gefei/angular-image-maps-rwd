/*
 * rwdImageMaps AngularJS Directive v1.0
 *
 * Allows image maps to be used in a responsive design by recalculating the area coordinates to match the actual image size on load and window.resize
 *
 * Original Copyright (c) 2013 Matt Stow
 * https://github.com/stowball/jQuery-rwdImageMaps
 * http://mattstow.com
 * Licensed under the MIT license
 *
 * angular-rwdImageMaps.js (by Philip Saa)
 * (c) zilla Partners Pty Ltd
 * https://github.com/cowglow/
 * @cowglow
 *
 * Enhanced by https://github.com/cowglow/angular-image-maps-rwd/pull/1/files
 */

angular.module("rwdImageMaps",[]).directive("rwdimgmap",["$window",function(a){return{restrict:"CA",link:function(e,r,t){function n(){var a=angular.element(r)[0];if(!i||!h){var e=new Image;e.src=a.src,i||(i=e.width),h||(h=e.height)}var n=a.width/100,l=a.height/100,d=t.usemap.replace("#",""),g="coords",u=angular.element(document.querySelector('map[name="'+d+'"]')).find("area");angular.forEach(u,function(a){var e=angular.element(a);e.data(g)||!e.data(g,e.attr(g));for(var r=e.data(g).split(","),t=new Array(r.length),d=0;d<t.length;++d)d%2===0?t[d]=parseInt(r[d]/i*100*n):t[d]=parseInt(r[d]/h*100*l);e.attr(g,t.toString())})}var i=t.width;h=t.height,n(),angular.element(a).bind("resize",n)}}}]);
