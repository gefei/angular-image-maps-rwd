/*
 * rwdImageMaps AngularJS Directive v1.0
 *
 * Allows image maps to be used in a responsive design by recalculating the area coordinates to match the actual image size on load and window.resize
 *
 * Original Copyright (c) 2013 Matt Stow
 * https://github.com/stowball/jQuery-rwdImageMaps
 * http://mattstow.com
 * Licensed under the MIT license
 *
 * angular-rwdImageMaps.js (by Philip Saa)
 * (c) zilla Partners Pty Ltd
 * https://github.com/cowglow/
 * @cowglow
 *
 * Enhanced by https://github.com/cowglow/angular-image-maps-rwd/pull/1/files
 */

angular.module("rwdImageMaps",[]).directive("rwdimgmap",["$window",function(a){return{restrict:"CA",link:function(r,t,e){function n(){var a=angular.element(t)[0];if(!i||!l){var r=new Image;r.src=a.src,void 0==r.src&&(r.src=$(t).attr("ng-src")),i||(i=r.width),l||(l=r.height)}var n=a.width/100,c=a.height/100,d=e.usemap.replace("#",""),g="coords",u=angular.element(document.querySelector('map[name="'+d+'"]')).find("area");angular.forEach(u,function(a){var r=angular.element(a);r.data(g)||!r.data(g,r.attr(g));for(var t=r.data(g).split(","),e=new Array(t.length),d=0;d<e.length;++d)d%2===0?e[d]=parseInt(t[d]/i*100*n):e[d]=parseInt(t[d]/l*100*c);r.attr(g,e.toString())})}var i=$(t).attr("width"),l=$(t).attr("height");n(),angular.element(a).bind("resize",n)}}}]);
