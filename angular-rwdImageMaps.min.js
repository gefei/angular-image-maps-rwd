/*
 * rwdImageMaps AngularJS Directive v1.0
 *
 * Allows image maps to be used in a responsive design by recalculating the area coordinates to match the actual image size on load and window.resize
 *
 * Original Copyright (c) 2013 Matt Stow
 * https://github.com/stowball/jQuery-rwdImageMaps
 * http://mattstow.com
 * Licensed under the MIT license
 *
 * angular-rwdImageMaps.js (by Philip Saa)
 * (c) zilla Partners Pty Ltd
 * https://github.com/cowglow/
 * @cowglow
 *
 * Enhanced by https://github.com/cowglow/angular-image-maps-rwd/pull/1/files
 */

angular.module("rwdImageMaps",[]).directive("rwdimgmap",function(a){return{restrict:"CA",link:function(r,t,e){function n(){var a=angular.element(t)[0];if(!i||!l){var r=new Image;r.src=a.src,void 0==r.src&&(r.src=$(t).attr("ng-src")),i||(i=r.width),l||(l=r.height)}var n=a.width/100,c=a.height/100,g=e.usemap.replace("#",""),d="coords",u=angular.element(document.querySelector('map[name="'+g+'"]')).find("area");angular.forEach(u,function(a){var r=angular.element(a);r.data(d)||!r.data(d,r.attr(d));for(var t=r.data(d).split(","),e=new Array(t.length),g=0;g<e.length;++g)g%2===0?e[g]=parseInt(t[g]/i*100*n):e[g]=parseInt(t[g]/l*100*c);r.attr(d,e.toString())})}var i=$(t).attr("width"),l=$(t).attr("height");n(),angular.element(a).bind("resize",n)}}});
